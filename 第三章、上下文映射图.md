# 第三章、上下文映射图

## 一、上下文映射图用途

1. 有效地表示核心域和其它域（支撑域、通用子域）之间的关系（上下游集成关系）
2. 有效地指明有哪些地方需要与其他团队进行交流（这些团队负责着其它域）
3. 有效地帮助团队发现可能有碍项目进展的其它域



## 二、上下文映射图长什么样？

![img](./assets/images/context-mapping-sample)

像上面这样，他的主要工作清楚标识各个限界上下文之间的上下游关系。而ACL / OHS / PL 则是以下关系。

ACL：防腐层，也可以说是屏蔽其它域对自己的污染。该层通过访问其它域，将其它域返回的数据包装成本域的业务模型。也就是说，ＡＣＬ是一个翻译兼外交官的角色。

OHS / PL：两者是配对出现的，前者是ＡＰＩ服务，后者则是对ＡＰＩ的描述（ＡＰＩ文档）

至于ＡＣＬ的实现，书本里以`本域Service`> `adaptor`>`http client`>`支撑域或通用子域`>`translator`的调用方式，总体来说，就是屏敝外域业务污染。在核心域中，只能看到自己的业务模型。

举个例子：在论坛域中，需要知道帖子作者的信息，那么就要调用用户域的接口获取用户信息。但是这个用户信息是用户域的业务模型，而不是论坛域的，在论坛域中，用户有别的名字－作者，所以ＡＣＬ就是要将这个用户信息翻译成论坛域的作者信息。

> 初看这样做有点麻烦，甚至觉得多此一举。
>
> 但基于一个事实便觉得好有道理：就是我家的东西我最熟，处理我家的东西我得心应手。所以把别人家的东西转换概念我家的东西，我可以轻车熟路地处理好。



## 三、总结

这一章我还是没有仔细看下去，因为里面参杂着大量的设计讨论，而这些设计讨论并没有将这一章的主题突显出来，反而是对一些设计的决策进行反复的讨论，并且假设你知道它的业务、技术背景。

所以，在了解映射图是什么，中心思想是什么，并且知道一般实现是什么即可。

> 再次吐糟作者，你写的是书。

